{% for servico in servicos %}
<!-- Modal de Edição de Serviço -->
<div class="modal fade" id="editServicoModal{{ servico.id }}" tabindex="-1"
  aria-labelledby="editServicoModalLabel{{ servico.id }}" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editServicoModalLabel{{ servico.id }}">Editar Serviço</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action="{{ url_for('main.edit_servico', id=servico.id) }}" method="post">
          <div class="mb-3">
            <label for="servico_descricao" class="form-label">Descrição do Serviço</label>
            <input type="text" class="form-control" name="servico_descricao"
              value="{{ servico.servico_descricao.replace('[REVENDA]', '') }}" required>
          </div>
          <div class="mb-3">
            <label for="aparelho" class="form-label">Aparelho</label>
            <input type="text" class="form-control" name="aparelho" value="{{ servico.aparelho or '' }}">
          </div>
          <div class="mb-3">
            <label for="tipo" class="form-label">Tipo</label>
            <select class="form-select edit_tipo_servico" name="tipo" data-servico-id="{{ servico.id }}" required>
              <option value="Manutenção" {% if servico.tipo=='Manutenção' %}selected{% endif %}>Manutenção</option>
              <option value="Venda de Aparelho" {% if servico.tipo=='Venda de Aparelho' %}selected{% endif %}>Venda
                de Aparelho</option>
            </select>
          </div>

          <div class="mb-3 edit_subtipo_venda_div" style="display:none;" data-servico-id="{{ servico.id }}">
            <label class="form-label">Subtipo de Venda</label>
            <div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="subtipo_venda_{{ servico.id }}"
                  id="edit_subtipo_reforma_{{ servico.id }}" value="Reforma" {% if not
                  servico.servico_descricao.startswith('[REVENDA]') %}checked{% endif %}>
                <label class="form-check-label" for="edit_subtipo_reforma_{{ servico.id }}">Reforma</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="subtipo_venda_{{ servico.id }}"
                  id="edit_subtipo_revenda_{{ servico.id }}" value="Revenda" {% if
                  servico.servico_descricao.startswith('[REVENDA]') %}checked{% endif %}>
                <label class="form-check-label" for="edit_subtipo_revenda_{{ servico.id }}">Revenda</label>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <label for="custo_pecas" class="form-label">Custos e/ou peças</label>
            <input type="number" step="0.01" class="form-control" name="custo_pecas"
              value="{{ servico.custo_pecas }}">
          </div>
          <div class="mb-3 edit_mao_de_obra_div" data-servico-id="{{ servico.id }}">
            <label for="mao_de_obra" class="form-label">Mão de
              Obra</label>
            <input type="number" step="0.01" class="form-control" name="mao_de_obra"
              value="{{ servico.mao_de_obra }}">
          </div>
          <div class="mb-3 edit_preco_aparelho_div" style="display:none;" data-servico-id="{{ servico.id }}">
            <label for="preco_aparelho" class="form-label">Preço do
              Aparelho</label>
            <input type="number" step="0.01" class="form-control" name="preco_aparelho"
              value="{{ servico.preco_aparelho }}">
          </div>

          <div class="mb-3 edit_status_radios_div" data-servico-id="{{ servico.id }}">
            <label class="form-label">Status</label>
            <div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="status"
                  id="edit_status_iniciado_{{ servico.id }}" value="Iniciado" {% if servico.status=='Iniciado'
                  %}checked{% endif %}>
                <label class="form-check-label" for="edit_status_iniciado_{{ servico.id }}">Iniciado</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="status"
                  id="edit_status_finalizado_{{ servico.id }}" value="Finalizado" {% if servico.status=='Finalizado'
                  %}checked{% endif %}>
                <label class="form-check-label" for="edit_status_finalizado_{{ servico.id }}">Finalizado</label>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <label for="edit_forma_pagamento_{{ servico.id }}" class="form-label">Forma de Pagamento</label>
            <input type="text" class="form-control" id="edit_forma_pagamento_{{ servico.id }}"
              name="forma_pagamento" value="{{ servico.forma_pagamento or '' }}">
          </div>
          <div class="mb-3">
            <label for="edit_cliente_{{ servico.id }}" class="form-label">Cliente</label>
            <input type="text" class="form-control" id="edit_cliente_{{ servico.id }}" name="cliente"
              value="{{ servico.cliente or '' }}">
          </div>
          <button type="submit" class="btn btn-primary">Salvar Alterações</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endfor %}
